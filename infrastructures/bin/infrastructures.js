#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("@aws-cdk/core");
const infrastructures_stack_1 = require("../lib/infrastructures-stack");
const credentials_stack_1 = require("../lib/credentials-stack");
const vpc_stack_1 = require("../lib/vpc-stack");
const rds_stack_1 = require("../lib/rds-stack");
const app = new cdk.App();
const credentialsStackEntity = new credentials_stack_1.CredentialsStack(app, 'CredentialsStack');
const vpcStackEntity = new vpc_stack_1.VpcStack(app, 'VpcStack');
const rdsStackEntity = new rds_stack_1.RdsStack(app, 'RdsStack', {
    vpc: vpcStackEntity.vpc,
});
new infrastructures_stack_1.InfrastructuresStack(app, 'InfrastructuresStack', {
    vpc: vpcStackEntity.vpc,
    dbInstance: rdsStackEntity.dbInstance,
    region: app.node.tryGetContext('region') ||
        process.env.CDK_INTEG_REGION ||
        process.env.CDK_DEFAULT_REGION,
    account: app.node.tryGetContext('account') ||
        process.env.CDK_INTEG_ACCOUNT ||
        process.env.CDK_DEFAULT_ACCOUNT,
    appCredentials: credentialsStackEntity.pickmeCredentials.appCredentials,
    s3Credentials: credentialsStackEntity.pickmeCredentials.s3Credentials,
    dbCredentials: rdsStackEntity.dbCredentials,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5mcmFzdHJ1Y3R1cmVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaW5mcmFzdHJ1Y3R1cmVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUFvQztBQUNwQyxxQ0FBb0M7QUFDcEMsd0VBQW1FO0FBQ25FLGdFQUEyRDtBQUMzRCxnREFBMkM7QUFDM0MsZ0RBQTJDO0FBRTNDLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFBO0FBRXpCLE1BQU0sc0JBQXNCLEdBQUcsSUFBSSxvQ0FBZ0IsQ0FBQyxHQUFHLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtBQUU1RSxNQUFNLGNBQWMsR0FBRyxJQUFJLG9CQUFRLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFBO0FBRXBELE1BQU0sY0FBYyxHQUFHLElBQUksb0JBQVEsQ0FBQyxHQUFHLEVBQUUsVUFBVSxFQUFFO0lBQ25ELEdBQUcsRUFBRSxjQUFjLENBQUMsR0FBRztDQUN4QixDQUFDLENBQUE7QUFFRixJQUFJLDRDQUFvQixDQUFDLEdBQUcsRUFBRSxzQkFBc0IsRUFBRTtJQUNwRCxHQUFHLEVBQUUsY0FBYyxDQUFDLEdBQUc7SUFDdkIsVUFBVSxFQUFFLGNBQWMsQ0FBQyxVQUFVO0lBQ3JDLE1BQU0sRUFDSixHQUFHLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUM7UUFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0I7UUFDNUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0I7SUFDaEMsT0FBTyxFQUNMLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQztRQUNqQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQjtRQUM3QixPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQjtJQUNqQyxjQUFjLEVBQUUsc0JBQXNCLENBQUMsaUJBQWlCLENBQUMsY0FBYztJQUN2RSxhQUFhLEVBQUUsc0JBQXNCLENBQUMsaUJBQWlCLENBQUMsYUFBYTtJQUNyRSxhQUFhLEVBQUUsY0FBYyxDQUFDLGFBQWE7Q0FDNUMsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuaW1wb3J0ICdzb3VyY2UtbWFwLXN1cHBvcnQvcmVnaXN0ZXInXG5pbXBvcnQgKiBhcyBjZGsgZnJvbSAnQGF3cy1jZGsvY29yZSdcbmltcG9ydCB7IEluZnJhc3RydWN0dXJlc1N0YWNrIH0gZnJvbSAnLi4vbGliL2luZnJhc3RydWN0dXJlcy1zdGFjaydcbmltcG9ydCB7IENyZWRlbnRpYWxzU3RhY2sgfSBmcm9tICcuLi9saWIvY3JlZGVudGlhbHMtc3RhY2snXG5pbXBvcnQgeyBWcGNTdGFjayB9IGZyb20gJy4uL2xpYi92cGMtc3RhY2snXG5pbXBvcnQgeyBSZHNTdGFjayB9IGZyb20gJy4uL2xpYi9yZHMtc3RhY2snXG5cbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKClcblxuY29uc3QgY3JlZGVudGlhbHNTdGFja0VudGl0eSA9IG5ldyBDcmVkZW50aWFsc1N0YWNrKGFwcCwgJ0NyZWRlbnRpYWxzU3RhY2snKVxuXG5jb25zdCB2cGNTdGFja0VudGl0eSA9IG5ldyBWcGNTdGFjayhhcHAsICdWcGNTdGFjaycpXG5cbmNvbnN0IHJkc1N0YWNrRW50aXR5ID0gbmV3IFJkc1N0YWNrKGFwcCwgJ1Jkc1N0YWNrJywge1xuICB2cGM6IHZwY1N0YWNrRW50aXR5LnZwYyxcbn0pXG5cbm5ldyBJbmZyYXN0cnVjdHVyZXNTdGFjayhhcHAsICdJbmZyYXN0cnVjdHVyZXNTdGFjaycsIHtcbiAgdnBjOiB2cGNTdGFja0VudGl0eS52cGMsXG4gIGRiSW5zdGFuY2U6IHJkc1N0YWNrRW50aXR5LmRiSW5zdGFuY2UsXG4gIHJlZ2lvbjpcbiAgICBhcHAubm9kZS50cnlHZXRDb250ZXh0KCdyZWdpb24nKSB8fFxuICAgIHByb2Nlc3MuZW52LkNES19JTlRFR19SRUdJT04gfHxcbiAgICBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9SRUdJT04sXG4gIGFjY291bnQ6XG4gICAgYXBwLm5vZGUudHJ5R2V0Q29udGV4dCgnYWNjb3VudCcpIHx8XG4gICAgcHJvY2Vzcy5lbnYuQ0RLX0lOVEVHX0FDQ09VTlQgfHxcbiAgICBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5ULFxuICBhcHBDcmVkZW50aWFsczogY3JlZGVudGlhbHNTdGFja0VudGl0eS5waWNrbWVDcmVkZW50aWFscy5hcHBDcmVkZW50aWFscyxcbiAgczNDcmVkZW50aWFsczogY3JlZGVudGlhbHNTdGFja0VudGl0eS5waWNrbWVDcmVkZW50aWFscy5zM0NyZWRlbnRpYWxzLFxuICBkYkNyZWRlbnRpYWxzOiByZHNTdGFja0VudGl0eS5kYkNyZWRlbnRpYWxzLFxufSlcbiJdfQ==